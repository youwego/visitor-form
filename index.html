<script>
  function submitForm() {
    const artist = document.getElementById("artist").value.trim();
    const presale = document.getElementById("presale").value.trim();
    const guest = document.getElementById("guest").value.trim();
    const memo = document.getElementById("memo").value.trim();

    if (!artist || !presale || !guest) {
      alert("すべての必須項目を入力してください");
      return;
    }

    const params = new URLSearchParams({
      artist,
      presale,
      guest,
      memo
    });

    const endpoint = "https://script.google.com/macros/s/AKfycby-EQXYdpkffyYD4z0o7HMmtOvh_5KwFZKgxDErTkZPn1KnYzmQBYrBzjGgBkKiEOyc/exec";

    fetch(`${endpoint}?${params.toString()}`, {
      method: "GET",
    })
    .then((res) => {
      if (!res.ok) throw new Error("HTTP Error");
      return res.json();
    })
    .then((data) => {
      if (data.status === "success") {
        window.location.href = "thanks.html";
      } else {
        throw new Error(data.message || "Unknown Error");
      }
    })
    .catch((error) => {
      alert("送信中にエラーが発生しました: " + error.message);
    });
  }
</script>
