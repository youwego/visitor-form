<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("form");

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const artist = document.getElementById("artist").value.trim();
    const presale = document.getElementById("presale").value.trim();
    const guest = document.getElementById("guest").value.trim();
    const memo = document.getElementById("memo").value.trim();

    if (!artist || !presale || !guest) {
      alert("すべての必須項目を入力してください。");
      return;
    }

    // JSONで送信（FormData禁止）
    fetch("https://script.google.com/macros/s/AKfycbxHxVlelQKfv2L-zf4d9cBT-0BPerbpGfJNl4A4hbx-vtXL_8OBo3q-IUubTbSGBnEy/exec", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        artist: artist,
        presale: presale,
        guest: guest,
        memo: memo
      })
    })
    .then(res => res.text())
    .then(res => {
      if (res === "success") {
        window.location.href = "thanks.html";  // 完了画面に遷移
      } else {
        alert("送信エラー: " + res);
      }
    })
    .catch(err => {
      alert("通信エラー: " + err.message);
    });
  });
});
</script>
